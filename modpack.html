<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>T√©l√©charger le Modpack</title>
  <style>
    :root{
      --bg:#0d1117; --panel:#161b22; --text:#fff; --muted:#9aa4b2;
      --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444;
      --grad1:#6c8cff; --grad2:#4f6fff; --radius:16px;
    }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
    .wrap{max-width:1100px;margin:auto;padding:32px 20px}
    h1{margin:0 0 6px;font-size:clamp(24px,3.5vw,34px)}
    p.lead{margin:0 0 18px;color:#dbe7ff;opacity:.9}
    a.btn{display:inline-block;padding:14px 20px;border-radius:12px;text-decoration:none;font-weight:800;color:#fff;background:linear-gradient(135deg,#6c8cff,#4f6fff);box-shadow:0 10px 22px rgba(0,0,0,.25)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px;margin-top:22px}
    .card{grid-column:span 12;background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:20px;position:relative;box-shadow:0 10px 26px rgba(0,0,0,.25)}
    @media(min-width:780px){.card{grid-column:span 4}}
    .card h3{margin:0 0 8px}
    .card p{margin:0 0 12px;color:var(--muted)}
    .card ul{margin:8px 0 14px 18px}
    .download{display:flex;gap:10px;flex-wrap:wrap}
    .download a{padding:12px 16px;border-radius:12px;text-decoration:none;font-weight:700}
    .primary{background:linear-gradient(135deg,#00c98b,#00a97a);color:#fff}
    .ghost{background:#0f1420;color:#cdd6e5;border:1px solid rgba(255,255,255,.08)}
    .ribbon{position:absolute;top:14px;right:14px;background:#10b981;color:#052e1a;font-size:12px;font-weight:900;padding:6px 10px;border-radius:999px;display:none}
    .card.reco .ribbon{display:inline-block}
    .specs{margin-top:18px;background:#0f1420;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:12px}
    .kv{display:flex;gap:10px;flex-wrap:wrap}
    .kv span{background:#111827;border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:8px 10px;color:#c9d3e5}
    .note{color:var(--muted);font-size:.95rem;margin-top:10px}

    /* Effet visuel sur le bouton recommand√© + note shaders */
    @keyframes pulseA{0%,100%{transform:translateZ(0) scale(1)}50%{transform:translateZ(0) scale(1.03)}}
    .pulse{animation:pulseA 2.2s ease-in-out infinite}
    .note-adv{margin-top:8px;color:#cfe8ff;opacity:.95}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üì¶ Modpack ‚Äî choix automatique selon ta configuration</h1>
    <p class="lead">Le site d√©tecte ta RAM, ton CPU et (si possible) ton GPU pour te proposer le meilleur pack. Tu peux √©videmment choisir un autre pack.</p>

    <div class="grid">
      <!-- FULL -->
      <section class="card" id="pack-full">
        <div class="ribbon">Recommand√©</div>
        <h3>Ultra / Complet</h3>
        <p>Qualit√© max : <strong>Iris Shaders</strong>, <strong>Distant Horizons</strong>, tout Create, Sodium, etc.</p>
        <ul>
          <li>Pour PC r√©cents (RTX/RX/Arc, 16&nbsp;Go RAM+).</li>
          <li>Meilleurs graphismes, distance √©tendue.</li>
        </ul>
        <div class="download">
          <!-- Lien Google Drive direct -->
          <a class="primary" target="_blank" rel="noopener"
             href="https://drive.google.com/uc?export=download&id=1taXi1dKF8XrmoRw0HI369bZ8eYcli09o">‚¨áÔ∏è T√©l√©charger (Ultra)</a>
          <a class="ghost" href="index.html">üè† Retour</a>
        </div>
      </section>

      <!-- STANDARD -->
      <section class="card" id="pack-standard">
        <div class="ribbon">Recommand√©</div>
        <h3>Standard</h3>
        <p>√âquilibr√© : Sodium + tous les mods de gameplay. Pas de shaders ni Distant Horizons.</p>
        <ul>
          <li>Pour la majorit√© des PC (8&nbsp;Go RAM+, 4&nbsp;c≈ìurs+).</li>
          <li>Bon FPS et stabilit√©.</li>
        </ul>
        <div class="download">
          <a class="primary" target="_blank" rel="noopener"
             href="https://drive.google.com/uc?export=download&id=1_7IdVdeQUumD8QBlYvLPYVOhnq7SfEPs">‚¨áÔ∏è T√©l√©charger (Standard)</a>
          <a class="ghost" href="index.html">üè† Retour</a>
        </div>
      </section>

      <!-- LITE -->
      <section class="card" id="pack-lite">
        <div class="ribbon">Recommand√©</div>
        <h3>Lite</h3>
        <p>All√©g√© : retire les mods lourds (ex. Distant Horizons, shaders), garde l‚Äôessentiel du serveur.</p>
        <ul>
          <li>Pour PC anciens / iGPU (Intel UHD/Iris), 4‚Äì8&nbsp;Go RAM.</li>
          <li>Priorit√© aux performances.</li>
        </ul>
        <div class="download">
          <a class="primary" target="_blank" rel="noopener"
             href="https://drive.google.com/uc?export=download&id=141uaX-_9GgfQY6j73H_jc3IwITf8EKz6">‚¨áÔ∏è T√©l√©charger (Lite)</a>
          <a class="ghost" href="index.html">üè† Retour</a>
        </div>
      </section>
    </div>

    <!-- SHADERPACK RECOMMAND√â -->
    <section class="card" id="shaderpack" style="grid-column:span 12; margin-top:10px">
      <h3>Shaderpack recommand√© ‚Äî Complementary Shaders: Unbound</h3>
      <p>Fonctionne avec <strong>Iris</strong>. T√©l√©charge et place le fichier <code>.zip</code> dans
        <em>shaderpacks/</em> de ton instance (ne pas d√©zipper), puis active-le en jeu :
        <em>Options ‚Üí Vid√©o ‚Üí Shader Packs</em>.</p>
      <div class="download">
        <!-- Tu l‚Äôas d√©j√† ajout√© √† la racine du repo -->
        <a class="primary" href="ComplementaryUnbound_r5.5.1.zip">‚¨áÔ∏è T√©l√©charger le shaderpack</a>
        <a class="ghost" href="#pack-full">Voir le pack Ultra</a>
      </div>
      <p class="note note-adv" id="shader-advice"></p>
    </section>

    <div class="specs" id="specs">
      <strong>üîç D√©tection locale :</strong>
      <div class="kv" id="kv"></div>
      <div class="note">Cette d√©tection est approximative (navigateur) et ne lit aucune donn√©e priv√©e. Si le choix ne te convient pas, prends un autre pack.</div>
    </div>
  </div>

  <script>
    // --- Lecture des capacit√©s du navigateur ---
    function getGPUInfo(){
      try{
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        if(!gl) return {renderer:'(WebGL indisponible)'};
        const dbg = gl.getExtension('WEBGL_debug_renderer_info');
        const renderer = dbg ? gl.getParameter(dbg.UNMASKED_RENDERER_WEBGL) : gl.getParameter(gl.RENDERER);
        return {renderer: String(renderer || '').trim()};
      }catch(e){ return {renderer:'(non d√©tect√©)'} }
    }

    function getPlatform(){
      const ua = navigator.userAgent || '';
      if(navigator.userAgentData && navigator.userAgentData.platform) return navigator.userAgentData.platform;
      if(/Windows/i.test(ua)) return 'Windows';
      if(/Mac OS/i.test(ua)) return 'macOS';
      if(/Linux/i.test(ua)) return 'Linux';
      return 'inconnu';
    }

    function chooseTier({ram, cores, gpu}){
      const g = gpu.toLowerCase();
      const strongGPU = /(rtx|rx\s?[5-9]|arc|rx\s?7|gtx\s?16|radeon\s?vii|apple\s?m[123])/i.test(g);
      const weakGPU = /(intel\(r\)\s?hd|uhd|iris\s?(plus|xe)?|gt\s?7|940m|mx1|mx2)/i.test(g);

      if((ram>=16 && cores>=8 && !weakGPU) || strongGPU) return 'full';
      if((ram>=8 && cores>=4) && !weakGPU) return 'standard';
      return 'lite';
    }

    function fmtRam(r){ return r ? (r+' Go RAM') : 'RAM inconnue'; }

    document.addEventListener('DOMContentLoaded', ()=>{
      const ram = Number(navigator.deviceMemory || 0);           // Go
      const cores = Number(navigator.hardwareConcurrency || 0);  // threads
      const {renderer} = getGPUInfo();
      const os = getPlatform();

      const tier = chooseTier({ram, cores, gpu: renderer});

      // UI: badge "Recommand√©"
      const id = tier === 'full' ? 'pack-full' : tier === 'standard' ? 'pack-standard' : 'pack-lite';
      const card = document.getElementById(id);
      if(card){ card.classList.add('reco'); }
      card?.querySelector('.primary')?.classList.add('pulse');

      // Affiche les specs d√©tect√©es
      const kv = document.getElementById('kv');
      const add = (txt)=>{ const s=document.createElement('span'); s.textContent=txt; kv.appendChild(s) };
      add(fmtRam(ram));
      add(cores ? (cores+' c≈ìurs (threads)') : 'C≈ìurs inconnus');
      add(os);
      add(renderer);

      // Conseils Shader selon la config d√©tect√©e
      const advice = document.getElementById('shader-advice');
      if (advice){
        if (tier === 'full'){
          advice.textContent = "‚úÖ Recommand√© : votre pack Ultra inclut d√©j√† Iris. Activez le shaderpack dans le jeu.";
        } else if (tier === 'standard'){
          advice.textContent = "‚ö†Ô∏è Optionnel : les shaders peuvent baisser les FPS. Utilisez des presets Low/Medium et pensez √† installer Iris (inclus dans le pack Ultra).";
        } else {
          advice.textContent = "‚õî D√©conseill√© : privil√©giez le pack Lite sans shaders pour garder des FPS stables.";
        }
      }
    });
  </script>
</body>
</html>
